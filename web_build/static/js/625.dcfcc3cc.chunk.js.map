{"version":3,"file":"static/js/625.dcfcc3cc.chunk.js","mappings":"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","sources":["pages/Layout/pages/MyBuddies/index.js"],"sourcesContent":["import React, { useMemo } from \"react\"\r\nimport { IoNotificationsOutline, IoSettingsOutline } from \"react-icons/io5\"\r\nimport { useSelector, useStore, useDispatch } from \"react-redux\"\r\nimport {\r\n  Button,\r\n  CheckBox,\r\n  IconButton,\r\n  Image,\r\n  OptionsMenu,\r\n  Paragraph,\r\n  Row,\r\n  Title\r\n} from \"../../../../components/common\"\r\nimport {\r\n  AddBuddyModal,\r\n  Table,\r\n  TableBodyRow,\r\n  TableHeadRow\r\n} from \"../../../../components/MyBuddies\"\r\nimport { useModal } from \"../../../../context/modal-context\"\r\nimport { useState, useEffect } from \"react\"\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport { logout } from \"../../../../store/actions/auth\"\r\nimport people from \"../../../../assets/images/people.png\"\r\nimport SignOut from \"../../../../assets/images/SignOut.png\"\r\nimport Group86 from \"../../../../assets/images/Group 86.png\"\r\nimport NotePencil from \"../../../../assets/images/NotePencil.png\"\r\nimport OptionMenuSettings from \"../../../../components/common/OptionMenuSettings\"\r\nimport AlertModal from \"../../../../components/common/AlertModal\"\r\nimport { useAddBuddyMutation, useDeleteBuddyMutation, useGetBuddiesQuery, useGetMyProfileQuery } from \"../../../../store/slice/api\"\r\nimport LoadingSpinner from \"../../../../components/common/LoadingSpinner\"\r\n\r\nexport default function MyBuddies() {\r\n  const navigate = useNavigate()\r\n  const dispatch = useDispatch()\r\n  const token = useSelector(state => state.reducer.auth.token)\r\n  const [buddies, setbuddies] = useState([])\r\n  const store = useStore()\r\n  const { setModal } = useModal()\r\n  const [selectedBuddies, setSelectedBuddies] = useState({})\r\n\r\n  const { data: myProfile, isLoading: isProfileLoading, isSuccess: isProfileSuccessfullyLoaded } = useGetMyProfileQuery()\r\n  const { data: myBuddies, isLoading: loadingBuddies, isSuccess: buddiesSuccessfullyLoaded } = useGetBuddiesQuery()\r\n  const [addBuddy] = useAddBuddyMutation()\r\n  const [deleteBuddy] = useDeleteBuddyMutation()\r\n\r\n  const userProfile = useMemo(() => {\r\n    if (myProfile?.results) {\r\n      return myProfile.results[0]\r\n    }\r\n    return null\r\n  }, [myProfile])\r\n\r\n  useEffect(() => {\r\n    setbuddies(myBuddies)\r\n  }, [myBuddies])\r\n\r\n  useEffect(() => {\r\n    const initialSelectedBuddies = {}\r\n    buddies.forEach(({ id }) => {\r\n      initialSelectedBuddies[id] = false\r\n    })\r\n    setSelectedBuddies(initialSelectedBuddies)\r\n  }, [setSelectedBuddies])\r\n\r\n  const checkAllBuddiesSelected = () => {\r\n    const values = Object.values(selectedBuddies)\r\n    for (const value of values) {\r\n      if (!value) return false\r\n    }\r\n    return true\r\n  }\r\n  const toggleAllBuddies = () => {\r\n    const allSelected = checkAllBuddiesSelected()\r\n    const allBuddies = {}\r\n    buddies.forEach(({ id }) => {\r\n      allBuddies[id] = allSelected ? false : true\r\n    })\r\n    setSelectedBuddies(allBuddies)\r\n  }\r\n\r\n  const toggleBuddy = id => {\r\n    setSelectedBuddies(currentSelectedBuddies => {\r\n      return {\r\n        ...currentSelectedBuddies,\r\n        [id]: !currentSelectedBuddies[id]\r\n      }\r\n    })\r\n  }\r\n  const HandleDelete = (id) => {\r\n    deleteBuddy(id).unwrap().then()\r\n      .catch((err)=>{\r\n        console.log(err)\r\n        alert(JSON.stringify(err))\r\n      })\r\n  }\r\n\r\n  const addNewBuddy = () => {\r\n    if (userProfile?.subscription?.status === 'active' || buddies.length < 2) {\r\n      setModal(<AddBuddyModal navigate={navigate} subscription={userProfile?.subscription} setbuddies={setbuddies} addBuddies={addBuddy} token={token} store={store} />)\r\n    } else {\r\n      setModal(<AlertModal message={'Please Subscribe for adding more buddies ☺️'} buttonText={'Subscribe'} onSubmit={()=>{navigate('/subscriptions')}}/>)\r\n    }\r\n  }\r\n\r\n  console.log('buddies', buddies);\r\n  return (\r\n    <>\r\n      <Row\r\n        width=\"100%\"\r\n        height=\"73px\"\r\n        padding=\"24px 0\"\r\n        alignItems=\"center\"\r\n        justifyContent=\"space-between\"\r\n      >\r\n        <Title>My Buddies</Title>\r\n\r\n        <Row>\r\n          <OptionMenuSettings\r\n            options={[\r\n              { Icon: people, text: \"My Buddies\", onClick: () => { navigate('/home/my-buddies') } },\r\n              { Icon: Group86, text: \"My transactions\", onClick: () => { navigate('/home/transactions') } },\r\n              { Icon: NotePencil, text: \"Send Feedback\", onClick: () => { navigate('/home/send/feedback')} },\r\n              {\r\n                Icon: SignOut, text: \"Logout\", onClick: () => {\r\n                  dispatch(logout())\r\n                  navigate(\"/\")\r\n                }\r\n              }\r\n            ]}\r\n          />\r\n\r\n          <IconButton onClick={() => { navigate('/home/notifications') }}>\r\n            <IoNotificationsOutline />\r\n          </IconButton>\r\n        </Row>\r\n      </Row>\r\n\r\n      {Boolean(isProfileLoading || loadingBuddies)\r\n        ? <LoadingSpinner />\r\n        : <>\r\n            <Row\r\n              justifyContent=\"space-between\"\r\n              alignItems=\"center\"\r\n              width=\"100%\"\r\n              margin=\"24px 0 12px\"\r\n            >\r\n              <Paragraph bold fontSize=\"24px\" color=\"#000\">\r\n                All Buddies\r\n              </Paragraph>\r\n              <Button\r\n                width=\"151px\"\r\n                height=\"46px\"\r\n                color=\"#00A652\"\r\n                onClick={addNewBuddy}\r\n              >\r\n                + Add new Buddy\r\n              </Button>\r\n            </Row>\r\n\r\n            <Table>\r\n              <thead>\r\n                <TableHeadRow>\r\n                  <th>\r\n                    <CheckBox\r\n                      checked={checkAllBuddiesSelected()}\r\n                      onChange={toggleAllBuddies}\r\n                    />\r\n                  </th>\r\n                  <th>Contact Name</th>\r\n                  <th>Relation</th>\r\n                  <th>Phone Number</th>\r\n                  <th>Email</th>\r\n                  <th>Member Type</th>\r\n                </TableHeadRow>\r\n              </thead>\r\n              <tbody>\r\n                {buddies?.map((item, index) => (\r\n                  <TableBodyRow key={index}>\r\n                    <td>\r\n                      <CheckBox\r\n                        checked={selectedBuddies[item.id] === true}\r\n                        onChange={() => toggleBuddy(item.id)}\r\n                      />\r\n                    </td>\r\n                    <td>\r\n                      <Row alignItems=\"center\">\r\n                        <Image\r\n                          width=\"36px\"\r\n                          height=\"36px\"\r\n                          borderRadius=\"50%\"\r\n                          objectFit=\"cover\"\r\n                          src=\"https://upload.wikimedia.org/wikipedia/commons/a/a0/Pierre-Person.jpg\"\r\n                          alt=\"Person\"\r\n                        />\r\n                        N/A\r\n                      </Row>\r\n                    </td>\r\n                    <td>{item.relationship || 'N/A'}</td>\r\n                    <td>N/A</td>\r\n                    <td>{item.email}</td>\r\n                    <td>N/A</td>\r\n                    <td>\r\n                      <OptionsMenu\r\n                        options={[\r\n                          { text: \"Promote SubPrime\", onClick: () => { } },\r\n                          { text: \"Delete\", onClick: () => { HandleDelete(item.id) } }\r\n                        ]}\r\n                      />\r\n                    </td>\r\n                  </TableBodyRow>\r\n                ))}\r\n              </tbody>\r\n            </Table>\r\n          </>\r\n      }\r\n    </>\r\n  )\r\n}\r\n"],"names":["MyBuddies","navigate","useNavigate","dispatch","useDispatch","token","useSelector","state","reducer","auth","useState","buddies","setbuddies","store","useStore","setModal","useModal","selectedBuddies","setSelectedBuddies","useGetMyProfileQuery","myProfile","data","isProfileLoading","isLoading","isSuccess","useGetBuddiesQuery","myBuddies","loadingBuddies","useAddBuddyMutation","addBuddy","useDeleteBuddyMutation","deleteBuddy","userProfile","useMemo","results","useEffect","initialSelectedBuddies","forEach","id","checkAllBuddiesSelected","Object","values","console","log","width","height","padding","alignItems","justifyContent","options","Icon","people","text","onClick","Group86","NotePencil","SignOut","logout","Boolean","margin","bold","fontSize","color","subscription","status","length","addBuddies","message","buttonText","onSubmit","checked","onChange","allSelected","allBuddies","map","item","index","currentSelectedBuddies","borderRadius","objectFit","src","alt","relationship","email","unwrap","then","catch","err","alert","JSON","stringify"],"sourceRoot":""}